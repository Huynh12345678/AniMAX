(this["webpackJsonpanime-client"]=this["webpackJsonpanime-client"]||[]).push([[9],{135:function(e,t,n){"use strict";var c=n(8),i=n(38),o=n(12),s=n.n(o),r=(n(1),n(11)),a=n(2),l=["className","iconSize","iconClassName","startIcon","endIcon"],u=["onClick","to","disabled"],d=function(e){var t=e.className,n=e.iconSize,o=void 0===n?25:n,r=e.iconClassName,u=e.startIcon,d=e.endIcon,m=Object(i.a)(e,l);return Object(a.jsxs)("button",Object(c.a)(Object(c.a)({className:s()("flex items-center px-4 py-2 rounded-md font-medium text-xs md:text-sm lg:text-base hover:bg-opacity-80",t)},m),{},{children:[u&&Object(a.jsx)(u,{size:o,className:s()("mr-2",r)}),e.children,d&&Object(a.jsx)(d,{size:o,className:s()("ml-2",r)})]}))};t.a=function(e){var t=e.onClick,n=e.to,o=e.disabled,s=Object(i.a)(e,u);return n?Object(a.jsx)(r.b,{to:o?"#":n,children:Object(a.jsx)(d,Object(c.a)(Object(c.a)({},s),{},{onClick:t}))}):Object(a.jsx)(d,Object(c.a)(Object(c.a)({},s),{},{onClick:t}))}},136:function(e,t,n){"use strict";var c=n(54),i=n(31);t.a=function(e){return Object(i.useQuery)(["watch-info",e],(function(){return Object(c.f)(e)}))}},178:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var c=n(18),i=n(1),o=n.n(i),s=n(5),r=n(31),a=n(54),l=function(e,t,n){return Object(r.useQuery)(["source",{hash:e,id:t}],(function(){return Object(a.e)(e,t)}),{enabled:n})},u=n(136),d=function(){var e=Object(s.f)();return new URLSearchParams(e.search)},m=n(8),b=n(38),f=n(160),j=n.n(f),p=n(176),v=n.n(p),h=n(29),x=n(12),O=n.n(x),y=n(28),g=n.n(y),w=(n(177),n(2)),N=["options","source","onReady"],k=!1,E={xhrSetup:function(e,t){t="".concat(h.a,"/cors/").concat(t),e.open("GET",t,!0)}},T=function(e){var t=e.options,n=void 0===t?null:t,c=e.source,o=e.onReady,s=Object(b.a)(e,N),r=null===c||void 0===c?void 0:c.sources[0].src,a=Object(i.useRef)(),l=Object(i.useRef)(new v.a(E)),u=Object(m.a)(Object(m.a)({},n),{},{quality:{default:1080,options:[1080]}}),d=function(){var e;k=!1;var t=new j.a(".plyr-react",u);null!==(e=a.current)&&void 0!==e&&e.plyr&&(a.current.plyr=t),t.on("ready",(function(e){k||(k=!0,o&&o(t,e),t.on("enterfullscreen",(function(){window.screen.orientation.lock("landscape")})))}))};return l.current.on(v.a.Events.MANIFEST_LOADED,(function(){u.quality={default:l.current.levels[l.current.levels.length-1].height,options:l.current.levels.map((function(e){return e.height})),forced:!0,onChange:function(e){l.current.levels.forEach((function(t,n){t.height===e&&(l.current.currentLevel=n)}))}},d()})),Object(i.useEffect)((function(){var e;if(a.current){var t,n;if(r.includes("m3u8")&&v.a.isSupported())l.current.loadSource(null===c||void 0===c?void 0:c.sources[0].src),l.current.attachMedia(a.current),null===(t=a.current.plyr)||void 0===t||t.on("play",(function(){return l.current.startLoad()})),null===(n=a.current.plyr)||void 0===n||n.on("qualitychange",(function(){var e,t;0!==(null===(e=a.current)||void 0===e||null===(t=e.plyr)||void 0===t?void 0:t.currentTime)&&l.current.startLoad()}));else d();null!==(e=a.current)&&void 0!==e&&e.plyr&&c&&(a.current.plyr.source=c)}}),[u]),Object(w.jsx)("video",Object(m.a)({ref:a,className:"plyr-react plyr"},s))},S=function(e,t,n){var c=document.querySelector(".plyr__controls"),i=document.createElement("div");i.className=O()("plyr__controls__item plyr__control",n);var o=null===c||void 0===c?void 0:c.childNodes;o&&(null===c||void 0===c||c.insertBefore(i,t<0?o[(null===o||void 0===o?void 0:o.length)-1]:o[t-1]),g.a.render(e,i))};T.displayName="Plyr",T.defaultProps={options:{iconPrefix:"plyr",iconUrl:"/plyr.svg",i18n:{restart:"Xem l\u1ea1i",rewind:"L\xf9i {seektime} gi\xe2y",play:"Xem",pause:"D\u1eebng",fastForward:"Ti\u1ebfn {seektime} gi\xe2y",seek:"Tua",seekLabel:"{currentTime} / {duration}",played:"\u0110\xe3 ch\u1ea1y",buffered:"\u0110\xe3 load",currentTime:"Th\u1eddi gian hi\u1ec7n t\u1ea1i",duration:"Th\u1eddi l\u01b0\u1ee3ng",volume:"\xc2m l\u01b0\u1ee3ng",mute:"T\u1eaft \xe2m l\u01b0\u1ee3ng",unmute:"M\u1edf \xe2m l\u01b0\u1ee3ng",enableCaptions:"M\u1edf ph\u1ee5 \u0111\u1ec1",disableCaptions:"T\u1eaft ph\u1ee5 \u0111\u1ec1",download:"T\u1ea3i xu\u1ed1ng",enterFullscreen:"M\u1edf to\xe0n m\xe0n h\xecnh",exitFullscreen:"Tho\xe1t to\xe0n m\xe0n h\xecnh",frameTitle:"Video {title}",captions:"Ph\u1ee5 \u0111\u1ec1",settings:"C\xe0i \u0111\u1eb7t",menuBack:"Tr\u1edf v\u1ec1 menu",speed:"T\u1ed1c \u0111\u1ed9",normal:"B\xecnh th\u01b0\u1eddng",quality:"Ch\u1ea5t l\u01b0\u1ee3ng video",loop:"L\u1eb7p"},controls:["play-large","play","rewind","fast-forward","progress","current-time","mute","volume","settings","fullscreen"]}};var C=o.a.memo(T,(function(e,t){var n,c;return(null===(n=e.source)||void 0===n?void 0:n.sources[0].src)===(null===(c=t.source)||void 0===c?void 0:c.sources[0].src)})),L=n(187),I=n(123),M=n(55),P=function(e){Object(s.h)().slug;return Object(w.jsxs)(L.a,{children:[Object(w.jsx)(L.a.Button,{children:Object(w.jsx)(M.c,{})}),Object(w.jsx)(I.a,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(w.jsxs)(L.a.Items,{className:"rounded-md text-white overflow-y-scroll absolute right-0 bottom-full py-6 max-h-96 w-106 my-2 origin-top-right bg-background shadow-lg focus:outline-none",children:[Object(w.jsx)("h1",{className:"text-white font-medium mb-3",children:"T\u1eadp phim"}),Object(w.jsx)("div",{className:"w-full flex flex-wrap justify-center",children:e.episodes.map((function(t,n){return Object(w.jsx)(L.a.Item,{as:"button",className:O()("py-3 px-4 block rounded-md m-1 w-full hover:bg-opacity-80",n===e.activeIndex?"bg-primary text-white":"bg-background-lighter"),onClick:function(){var c;null===e||void 0===e||null===(c=e.onClick)||void 0===c||c.call(e,t,n)},children:t},n)}))})]})})]})},z=n(56),_=(n(178),n(179)),D=n(180),F=n(135),R=function(){var e=Object(i.useState)(window.screen.width),t=Object(c.a)(e,2),n=t[0],o=t[1];function s(){o(window.screen.width)}return Object(i.useEffect)((function(){return window.addEventListener("resize",s),function(){window.removeEventListener("resize",s)}}),[]),{isMobile:n<=768,isDesktop:n>768}},q="LANDSCAPE",B="portrait",A=function(){var e=Object(i.useState)(B),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(i.useEffect)((function(){var e=function(){window.matchMedia("(orientation: portrait)").matches&&o(B),window.matchMedia("(orientation: landscape)").matches&&o(q)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),{isLandscape:n===q,isPortrait:n===B}},J=n(132),Q=n(53);t.default=function(){var e=Object(s.h)().slug,t=Object(s.g)(),n=(d(),R().isDesktop),o=A().isPortrait,r=Object(Q.c)((function(e){return e})).episode.find((function(t){return t.slug==e})),a=Object(Q.b)(),m=Object(u.a)(e),b=m.data,f=m.isLoading,j=Object(i.useState)(!1),p=Object(c.a)(j,2),v=p[0],h=p[1];Object(i.useEffect)((function(){f||(Y("xem ngay"===r.name?0:null===b||void 0===b?void 0:b.episodes.findIndex((function(e){return e.name===r.name}))),h(!0))}),[f]);var x=Object(i.useState)(!1),y=Object(c.a)(x,2),g=y[0],N=y[1],k=Object(i.useState)(!1),E=Object(c.a)(k,2),T=E[0],L=E[1],I=Object(i.useState)(!1),M=Object(c.a)(I,2),q=M[0],B=M[1],U=Object(i.useState)(!1),X=Object(c.a)(U,2),G=X[0],V=X[1],H=Object(i.useState)(0),K=Object(c.a)(H,2),W=K[0],Y=K[1],Z=null===b||void 0===b?void 0:b.episodes[W],$=l(null===Z||void 0===Z?void 0:Z.hash,null===Z||void 0===Z?void 0:Z.id,!!b),ee=$.data,te=$.isLoading,ne=Object(i.useMemo)((function(){return{type:"video",sources:[{src:null===ee||void 0===ee?void 0:ee.source}]}}),[ee]),ce=Object(i.useMemo)((function(){return{autoplay:!0}}),[]),ie=function(e,t){a({type:"EPISODE",payload:{index:t,name:null===b||void 0===b?void 0:b.episodes[t].name}}),Y(t)},oe=function(){Y((function(t){return a({type:"EPISODE",payload:{index:t+1,name:null===b||void 0===b?void 0:b.episodes[t+1].name,slug:e}}),t+1}))},se=function(){Y((function(t){return a({type:"EPISODE",payload:{index:t-1,name:null===b||void 0===b?void 0:b.episodes[t-1].name,slug:e}}),t-1}))};Object(i.useEffect)((function(){window.scroll(0,0),V(!!o)}),[o]);return f||te||!v?Object(w.jsx)("div",{className:"absolute flex items-center justify-center bg-background inset-0 w-screen h-screen z-50",children:Object(w.jsx)(z.a,{})}):v&&Object(w.jsx)("div",{className:"absolute bg-background inset-0 w-screen h-screen z-50 watching",children:Object(w.jsxs)("div",{className:"relative w-full h-full",children:[Object(w.jsx)(C,{source:ne,onReady:function(e,t){[{component:Object(w.jsx)(P,{episodes:null===b||void 0===b?void 0:b.episodes.map((function(e){return e.name})),onClick:ie,activeIndex:W}),position:6,className:"flex items-center justify-center"},{component:Object(w.jsx)(F.a,{onClick:oe,startIcon:J.a,className:"p-none"}),position:6,className:"flex items-center justify-center ".concat(W==b.episodes.length-1&&"hidden")},{component:Object(w.jsx)(F.a,{onClick:se,startIcon:J.b,className:"p-none"}),position:6,className:O()("flex items-center justify-center",0==W&&"hidden")}].forEach((function(e){var t=e.component,n=e.position,c=void 0===n?-1:n,i=e.className;return S(t,c,i)})),e.on("timeupdate",(function(){var t=Math.round(e.duration-e.currentTime);L(t<=120)})),e.on("pause",(function(){N(!0)})),n&&(document.addEventListener("visibilitychange",(function(){if("visible"!==document.visibilityState){setTimeout((function(){return B(!0)}),6e3)}})),e.on("play",(function(){N(!1)})))},options:ce}),Object(w.jsxs)("div",{className:"absolute top-8 left-8 back "+(g?"block":"hidden"),children:[Object(w.jsx)(_.a,{size:30,className:"text-gray-300 hover:text-white cursor-pointer",onClick:function(){return t(-1)}}),Object(w.jsxs)("h1",{className:"self-center text-2xl font-bold -ml-5",children:["T\u1eadp ",null===b||void 0===b?void 0:b.episodes[W].name]})]}),Object(w.jsx)("div",{className:O()("absolute bottom-20 right-10",T&&W!==b.episodes.length-1?"block":"hidden"),children:Object(w.jsx)(F.a,{onClick:oe,startIcon:D.a,className:"shadow-lg bg-white text-black",children:"T\u1eadp ti\u1ebfp theo"})}),Object(w.jsxs)("div",{className:O()("absolute inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center",G?"block":"hidden"),children:[Object(w.jsx)("img",{src:"/rotate_landscape.gif",alt:"Please rotate your device to landscape"}),Object(w.jsx)("h1",{className:"text-center text-white text-xs sm:text-sm font-medium",children:"Chuy\u1ec3n sang ch\u1ebf \u0111\u1ed9 ngang \u0111\u1ec3 c\xf3 tr\u1ea3i nghi\u1ec7m t\u1ed1t nh\u1ea5t."})]}),Object(w.jsxs)("div",{className:O()("absolute inset-0 bg-black bg-opacity-90 px-40 flex flex-col space-y-6 justify-center",q?"block":"hidden"),onMouseEnter:function(){n&&q&&B(!1)},children:[Object(w.jsxs)("div",{className:"space-y-2",children:[Object(w.jsx)("h1",{className:"text-gray-400 font-medium text-lg",children:"B\u1ea1n \u0111ang xem"}),Object(w.jsx)("h1",{className:"text-white font-bold text-5xl",children:null===b||void 0===b?void 0:b.title}),Object(w.jsxs)("h1",{className:"text-white font-bold text-2xl",children:["T\u1eadp ",null===b||void 0===b?void 0:b.episodes[W].name]})]}),Object(w.jsx)("h1",{className:"text-gray-500 text-base font-medium line-clamp-3",children:null===b||void 0===b?void 0:b.description})]})]})})}}}]);
//# sourceMappingURL=9.9db9a615.chunk.js.map